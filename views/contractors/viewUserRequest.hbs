<!DOCTYPE html>
<html>
<head>
    <style>
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
        }
    </style>
</head>
<body>
    <div style="display: flex; justify-content: center; align-items: center;"></div>
<section>
<div class="container" style="background-color:white;">
    <div class="row" style="margin: 20px;">
        <div class="col-lg-3 col-md-6 col-sm-12">
            <div class="card">
                <div class="card-body" style="margin-top: 10px;">
                    <a href="/c/viewUserRequest" class="stretched-link"
                        style="text-decoration: none; color: rgba(239, 151, 47, 1);">
                        <h3 class="card-title text-center">Request</h3>
                        <p class="card-text"></p>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12">
            <div class="card">
                <div class="card-body" style="margin-top: 10px;">
                    <a href="/c/viewworker" class="stretched-link"
                        style="text-decoration: none; color: rgba(239, 151, 47, 1);">
                        <h3 class="card-title text-center">View Worker</h3>
                        <p class="card-text"></p>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-12">
            <div class="card">
                <div class="card-body" style="margin-top: 10px;">
                    <a href="/c/viewmine" class="stretched-link"
                        style="text-decoration: none; color: rgba(239, 151, 47, 1);">
                        <h3 class="card-title text-center">View Work</h3>
                        <p class="card-text"></p>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
</div>

    <div style="display: flex; justify-content: center; align-items: center;">
        <section>
            {{#each requests}}
            <hr>
            <button class="trigger btn btn-primary">You have a new request!!!</button>
            <div class="modal">
                <div class="modal-content">
                    <div class="request-card">
                        <h3>Request ID: {{_id}}</h3>
                        <hr>
                        <p>Contractor ID: {{contractorId}}</p>
                        <p>User ID: {{userId}}</p>
                        <hr>
                        <p>From Date: {{date1}}</p>
                        <p>To Date: {{date2}}</p>
                        <hr>
                        <h4>Number of Workers: {{noOfWorkers}}</h4>
                        <h4>Type of Work Preferred: {{work_preferred}}</h4>
                        <hr>
                        <p>Approved?: {{work}}</p>

                        <form action="/c/accept-request/{{_id}}" method="POST" enctype="multipart/form-data">
                        <input type="text" name="work" value="accepted" hidden>
                            <button class="btn btn-primary" type="submit">Accept</button>
                        </form>
                        <hr>
                        <form action="/c/deny-request/{{_id}}" method="POST">
                        <input type="text" name="work" value="denied" hidden>
                            <button class="btn btn-primary" type="submit">Deny</button>
                        </form>
                    </div>
                </div>
            </div>
            {{/each}}
        </section>
    </div>

    <script>
        // JavaScript/jQuery code to handle the modal functionality
        const triggers = document.querySelectorAll('.trigger');
        const modals = document.querySelectorAll('.modal');

        triggers.forEach((trigger, index) => {
            trigger.addEventListener('click', () => {
                modals[index].style.display = 'block';
            });
        });
    </script>
</div>
</body>
</html>
